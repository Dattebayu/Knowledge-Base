## Область видимости

Изначально внутри функции доступа к переменным вне ее нету. Чтобы указать явно, что какая-то переменная должны иметь глобальную область видимости существует специальный оператор `global`(глобализация происходит только в рамках данной функции):

```php

$hello = 'hello';

function foo($str) {
  global $hello;
  echo $str . $hello;
}


foo('Maxim');

```

Глобализация является плохой практикой, из-за того что можно перезаписать внутри функции переменную, что отразиться и на переменной вне функции и значение будет уже другим.

Так же если используется анонимная функция, которая передается в переменную, то мы можем с помощью команды use указать, что мы хотим ее использовать функции и работать с ней:

```php

$hello = 'hello';

foo = function ($str) use ($hello) {
  echo $str . $hello;
};


foo('Maxim');

```

И уже в данном случаи изменение переменной в функции не влияет на ее глобальную версию. То есть если мы в функции изменим значение у переменной `$hello`, то эта переменная в не функции не изменится.

---

Переменные внутри функции используются как прототипы, то есть какие либо изменения над ними, допустим если мы перезаписываем переменную на новое значение, не будут работать должным образом. Чтобы использовать не прототипы переменных, а их самих, нужно указать не сами переменные, а ссылки(указатели) на них через оператор `&`:

```php

$hello = 'hello';

function foo($str1, &$str2) {
  $str2 = $str1;
};


foo('Maxim', $hello);

```

В данном случаи значение переменной $hello перезапишется и будет равным `Maxim`, если бы мы не использовали указатель, то даже после прохождения данной функции, значение переменно $hello было бы равно `hello`.

Так же мы можешь использовать переменные из функции, которые передаем в качестве ссылки, но явно не создаем в основном теле программы.

```php

$hello = 'hello';

function foo($str1, &$str2, &$str3) {
  $str2 = $str1;

  $str3 = 'Какое-то значение';
};


foo('Maxim', $hello, $str3);

echo $str3;

```

Мы создали переменную `$str3` внутри функции и занесли значение, в качестве параметров передали ссылку на нее и в вызове функции саму переменную, теперь при обработке данной функции она вернут в переменную при передачи значение `$str3 = 'Какое-то значение';` и мы сможем пользоваться ею основной программе.

---

Так же кроме работы с переменными по ссылкам, существует возможность работать с функциями по ссылкам. Когда нам нужно работать с какими то данными изменения их значения, но чтобы не обращаться каждый раз к этой переменной или еще что то, можно просто буде передавать значение в функцию и она будет обновлять данные у этой переменной или сущности:

```php

$_GET['OCHEN_DLINI_NE_UDOBNI_TEXT'] = 'hello';

function &foo($str1) {

  $_GET['OCHEN_DLINI_NE_UDOBNI_TEXT'] = str1;

  return $_GET['OCHEN_DLINI_NE_UDOBNI_TEXT'];

};


$new = &foo('Maxim'); // будет хранит ссылку на $_GET['OCHEN_DLINI_NE_UDOBNI_TEXT'] и каждый раз изменяя данную переменную
// мы будем менять значение и у $_GET['OCHEN_DLINI_NE_UDOBNI_TEXT']

$new = '1234' // После этой записи переменная $_GET['OCHEN_DLINI_NE_UDOBNI_TEXT'] будет хранить уже не hello, а 1234

```

Обязательно нужно указать ссылку в двух местах.

Еще обязательно нужно передавать переменную до return, а не в одной строке с ним.
